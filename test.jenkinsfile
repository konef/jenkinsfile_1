pipeline {
    agent any
    stages {

        stage ('create file') {
            steps {
                touch file: 'file1.sh', timestamp: 0
                touch file: 'file2.sh', timestamp: 0
            }
        }
        stage ('parallel stages') {
            parallel {
                stage ('stage1') {
                    steps {
                        sh 'echo "Hello World!" > file1.sh'
                    }
                }
                stage ('stage2') {
                    steps {
                        sh 'echo "New Hello world!" > file2.sh'
                    }
                }
            }
        }
        stage ('read') {
            steps {
                sh """
                cat file1.sh
                cat file2.sh
                """
            }
        }
        stage ("cat") {
            steps {
                sh """
                rm -rf backups
                git clone git@github.com:konef/backups.git
                cd backups
                rm -rf config.xml
                cp -rf /var/lib/jenkins/jobs/parallel_job/config.xml config.xml
                git add -f config.xml
                git commit -m "Build $BUILD_NUMBER" config.xml 
                git push -u origin master
                """
            }
        }
    }
}
